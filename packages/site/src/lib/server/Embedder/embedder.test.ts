import { describe, it, expect, beforeEach } from "vitest"
import Embedder from "./embedder"

describe("Embedder", () => {
  let embedder: Embedder
  beforeEach(() => {
    embedder = Embedder()
  })

  it("calculates embeddings", async () => {
    const result = await embedder.embed("A query")

    expect(result).toMatchInlineSnapshot(`
      [
        0.05054311081767082,
        0.08753636479377747,
        0.011816912330687046,
        0.09241688251495361,
        -0.11664076149463654,
        0.08489935100078583,
        0.2030750960111618,
        0.023450981825590134,
        0.059142857789993286,
        -0.03726234659552574,
        0.04234765097498894,
        -0.07766030728816986,
        0.07483907788991928,
        -0.06975453346967697,
        -0.06141475588083267,
        0.010721239261329174,
        -0.0063166688196361065,
        0.00008491465996485204,
        -0.048503682017326355,
        -0.024489182978868484,
        -0.07166318595409393,
        0.03237631916999817,
        -0.056604351848363876,
        0.05967343598604202,
        -0.004916817881166935,
        0.02636680006980896,
        0.03947341442108154,
        0.0021905063185840845,
        0.0510270856320858,
        -0.06409978121519089,
        -0.1111527532339096,
        0.04513285681605339,
        0.050888705998659134,
        0.07109978795051575,
        0.031210534274578094,
        -0.09755542874336243,
        0.009771643206477165,
        -0.017428487539291382,
        0.012803268618881702,
        -0.033728908747434616,
        -0.0070477863773703575,
        -0.10403173416852951,
        0.04490853473544121,
        -0.002612609416246414,
        -0.05350188538432121,
        0.04382597655057907,
        -0.07366703450679779,
        0.07503543049097061,
        0.006206522695720196,
        -0.00009332776244264096,
        -0.14951346814632416,
        0.018032988533377647,
        -0.09919392317533493,
        -0.035844586789608,
        0.036655180156230927,
        -0.020634761080145836,
        -0.10558544099330902,
        -0.003847214626148343,
        -0.02408486418426037,
        0.04064503312110901,
        0.028826260939240456,
        -0.009373473934829235,
        0.03957941755652428,
        0.050622377544641495,
        0.04237208142876625,
        -0.07894142717123032,
        -0.0007583248079754412,
        -0.014637605287134647,
        0.030612032860517502,
        -0.05534740909934044,
        0.008302316069602966,
        0.006554193329066038,
        -0.027912870049476624,
        0.04908996447920799,
        0.005718197673559189,
        -0.014530516229569912,
        -0.032185304909944534,
        -0.03651438653469086,
        0.08494102209806442,
        0.00015884681488387287,
        -0.038260601460933685,
        -0.03079545684158802,
        -0.06459330022335052,
        0.05125117674469948,
        0.08890784531831741,
        -0.058842841535806656,
        0.0719791129231453,
        -0.039885882288217545,
        0.052552226930856705,
        -0.025964776054024696,
        -0.0723322182893753,
        0.014986168593168259,
        0.012906684540212154,
        0.001100921188481152,
        -0.021648017689585686,
        0.0012673151213675737,
        0.05142777040600777,
        -0.04306155815720558,
        0.08020269125699997,
        0.18643569946289062,
        0.022049354389309883,
        0.050746068358421326,
        -0.06110246106982231,
        -0.04714372381567955,
        -0.13135842978954315,
        0.0001414705184288323,
        -0.02930721826851368,
        -0.021702174097299576,
        0.025079041719436646,
        -0.025769192725419998,
        -0.07047876715660095,
        -0.03456713631749153,
        0.019982628524303436,
        -0.011188957840204239,
        0.01244433131068945,
        -0.048803478479385376,
        0.03971479833126068,
        0.023000923916697502,
        -0.00798008218407631,
        -0.050298940390348434,
        0.07551129907369614,
        0.07076966762542725,
        -0.026841705664992332,
        -0.029542185366153717,
        -0.0297656562179327,
        -0.0398561954498291,
        0.040000081062316895,
        -6.057591651461983e-33,
        0.00023951599723659456,
        -0.026144158095121384,
        0.030070018023252487,
        -0.007737820036709309,
        -0.033447884023189545,
        0.02588537149131298,
        -0.03846276178956032,
        0.026459023356437683,
        -0.025196682661771774,
        0.03807544708251953,
        -0.042738355696201324,
        0.018230028450489044,
        0.041646815836429596,
        0.0007342684548348188,
        0.058258213102817535,
        0.0035804801154881716,
        0.08238770812749863,
        0.017751291394233704,
        -0.03817335516214371,
        -0.009871819987893105,
        -0.05650211498141289,
        -0.008124486543238163,
        0.02498495765030384,
        0.09925401210784912,
        0.07197101414203644,
        -0.048685651272535324,
        -0.03036963753402233,
        -0.03305122256278992,
        0.01849023997783661,
        0.021615123376250267,
        0.010609660297632217,
        0.005423997063189745,
        -0.0818466916680336,
        -0.09813101589679718,
        0.03808670863509178,
        -0.025377647951245308,
        0.04516652226448059,
        -0.023102691397070885,
        0.05542067810893059,
        0.03000945784151554,
        -0.02916007675230503,
        -0.014192000962793827,
        0.07478678226470947,
        -0.06748311966657639,
        -0.025990812107920647,
        -0.010124802589416504,
        0.015126899816095829,
        -0.00899496115744114,
        -0.009735595434904099,
        0.02609364129602909,
        -0.036074429750442505,
        -0.03936122730374336,
        -0.05487661063671112,
        -0.011588728986680508,
        0.07094331830739975,
        -0.011573311872780323,
        -0.028917808085680008,
        0.10089320689439774,
        0.0036751599982380867,
        0.08553628623485565,
        -0.0010408363305032253,
        -0.023724673315882683,
        -0.014542588964104652,
        -0.035487063229084015,
        0.0010310657089576125,
        -0.014356235973536968,
        0.014952425844967365,
        -0.019098524004220963,
        0.11766400933265686,
        -0.0036903296131640673,
        -0.002477746456861496,
        -0.037654418498277664,
        0.05402391031384468,
        -0.04018368199467659,
        -0.05650976300239563,
        0.01253279484808445,
        0.022997841238975525,
        0.04155806452035904,
        -0.02486925758421421,
        0.02900446578860283,
        -0.07346050441265106,
        -0.08373002707958221,
        0.010853404179215431,
        0.023761257529258728,
        -0.012842041440308094,
        0.03730709105730057,
        0.015279713086783886,
        -0.024815503507852554,
        0.03291209787130356,
        -0.018593648448586464,
        -0.05829274654388428,
        0.006236282177269459,
        0.005822152830660343,
        0.024083394557237625,
        0.04867729917168617,
        2.61084825828315e-33,
        -0.044278666377067566,
        0.0038912883028388023,
        -0.05460261180996895,
        -0.00961154606193304,
        0.031883906573057175,
        -0.09229802340269089,
        0.03375403583049774,
        -0.086870938539505,
        -0.062228262424468994,
        0.04697921499609947,
        0.017299583181738853,
        -0.021436382085084915,
        0.09505319595336914,
        -0.06408656388521194,
        0.054847318679094315,
        0.08944801986217499,
        0.08347712457180023,
        -0.044304121285676956,
        -0.05704767629504204,
        0.07192902266979218,
        -0.0840589702129364,
        0.01968850940465927,
        -0.01887996308505535,
        -0.0019940808415412903,
        -0.01225352194160223,
        0.03485862538218498,
        0.002295557875186205,
        -0.010214835405349731,
        -0.046526286751031876,
        0.01286692451685667,
        0.03603341430425644,
        -0.1577918529510498,
        0.014359581284224987,
        0.003424810478463769,
        -0.040933672338724136,
        -0.03155328705906868,
        0.042904339730739594,
        -0.01079407799988985,
        -0.029092997312545776,
        0.06441111117601395,
        0.07285468280315399,
        -0.003565742401406169,
        0.09220326691865921,
        0.1653958261013031,
        0.008954309858381748,
        -0.0036394998896867037,
        -0.051331620663404465,
        0.0019449603278189898,
        0.045125801116228104,
        0.014396518468856812,
        -0.02757841907441616,
        0.026834750548005104,
        0.00612158328294754,
        -0.014679020270705223,
        -0.0183721873909235,
        0.01621958240866661,
        -0.06897000223398209,
        0.005264253821223974,
        0.05640997737646103,
        0.011400862596929073,
        -0.001929420861415565,
        0.10614140331745148,
        -0.030414164066314697,
        0.05620533972978592,
        -0.011538726277649403,
        -0.016024863347411156,
        -0.05683717131614685,
        -0.021214324980974197,
        -0.044338762760162354,
        0.040330611169338226,
        0.037381961941719055,
        0.009651885367929935,
        0.007576923817396164,
        -0.022397831082344055,
        -0.03581659495830536,
        0.02600819058716297,
        -0.08495161682367325,
        0.03138386085629463,
        -0.027846647426486015,
        0.02565252222120762,
        -0.07804592698812485,
        0.045352108776569366,
        0.03743117302656174,
        0.033632006496191025,
        -0.044265832751989365,
        -0.013088077306747437,
        0.051532477140426636,
        -0.004931921139359474,
        -0.004897494800388813,
        0.0015228581614792347,
        0.05919858068227768,
        -0.01428191177546978,
        -0.0700107142329216,
        -0.10518941283226013,
        0.017331678420305252,
        -1.3968659118290816e-8,
        -0.04464317858219147,
        -0.05374912917613983,
        -0.0622105672955513,
        0.008307135663926601,
        0.1600360870361328,
        0.02002890780568123,
        -0.009688770398497581,
        0.07231129705905914,
        -0.06464695930480957,
        0.042691443115472794,
        0.064419224858284,
        -0.02241077460348606,
        0.019444556906819344,
        0.032591577619314194,
        0.02426459826529026,
        -0.02622263692319393,
        -0.09092532098293304,
        0.014725820161402225,
        -0.04467519000172615,
        -0.09910008311271667,
        -0.02511242777109146,
        -0.012973722070455551,
        0.0018126537324860692,
        0.021314706653356552,
        -0.027486376464366913,
        0.0348077192902565,
        -0.037802595645189285,
        -0.02806817553937435,
        0.0497027188539505,
        0.05835292860865593,
        -0.01583651266992092,
        0.03770530968904495,
        0.06492929905653,
        -0.02680099382996559,
        0.05912075564265251,
        -0.07899472862482071,
        0.010176689364016056,
        -0.0356685034930706,
        -0.04673421010375023,
        -0.07188495993614197,
        0.018084581941366196,
        -0.010260851122438908,
        -0.028698498383164406,
        0.04916270449757576,
        -0.015528812073171139,
        -0.12161751836538315,
        0.044706687331199646,
        -0.04052411764860153,
        0.01047113910317421,
        -0.03214952349662781,
        -0.0064076026901602745,
        -0.04838043823838234,
        0.08930204063653946,
        0.0008670663228258491,
        -0.06985636055469513,
        0.02665901929140091,
        0.03385401889681816,
        0.0077916095033288,
        -0.06420943140983582,
        -0.04405461996793747,
        0.01720668002963066,
        0.014174374751746655,
        -0.011126766912639141,
        0.09099084138870239,
      ]
    `)
  })
})
